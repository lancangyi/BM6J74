/*-----------------------------------------------------------------------------
 * Filename: CORE_UART.C
 * Function: System Management SMBus Protocol drivers.
 *
 * Copyright (c) 2006-2013, ITE Tech. Inc. All Rights Reserved.
 *---------------------------------------------------------------------------*/
#include "CORE_INC.H"
#include "OEM_INC.H"


const BYTE code ScalarCommand[][8]		=	
{
	{0x00,0x00,0x00,0x00,0x01,0x02,0x03,0x04},	// 00: Reserve
	{0x04,0x12,0x78,0x72,0x01,0x02,0x03,0x04},	// 01:
	{0x04,0x12,0x79,0x71,0x01,0x02,0x03,0x04},	// 02:
	{0x04,0x12,0x7A,0x70,0x01,0x02,0x03,0x04},	// 03:
	{0x04,0x12,0x7B,0x6F,0x01,0x02,0x03,0x04},	// 04:
	{0x04,0x12,0x7C,0x6E,0x01,0x02,0x03,0x04},	// 05:
	{0x04,0x12,0x7D,0x6D,0x01,0x02,0x03,0x04},	// 06:
	{0x04,0x12,0x7E,0x6C,0x01,0x02,0x03,0x04},	// 07:
	{0x04,0x12,0x7F,0x6B,0x01,0x02,0x03,0x04},	// 08:
	{0x04,0x12,0x80,0x6A,0x01,0x02,0x03,0x04},	// 09:
	{0x04,0x12,0x81,0x69,0x01,0x02,0x03,0x04},	// 0A
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 0B
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 0C
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 0D
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 0E
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 0F
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 10
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 11
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 12
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04},	// 13
	{0x04,0x12,0x01,0x02,0x01,0x02,0x03,0x04}	// 14
	

};

//==============================================================================
// Name:		UartSendData
// Descript:	Send data from THR register
//==============================================================================
void UartSendData(BYTE bTxData)
{
	Set_T1_Timeout(T_Timer_5ms);	//Reset TF1
	
	while( (!(UART2_LSR&0x20)) && (TF1 == 0) );		// Wait
	UART2_THR = bTxData;
}



//==============================================================================
// Name:		UartSendData
// Descript:	Send data from THR register
//==============================================================================
void UartSendData_UART1(BYTE bTxData)
{
	Set_T1_Timeout(T_Timer_5ms);	//Reset TF1
	
	while( (!(UART1_LSR&0x20)) && (TF1 == 0) );		// Wait
	UART1_THR = bTxData;
}



//==============================================================================
// Name:		SendCmd2Scalar
// Descript:	Send command to Scalar
//==============================================================================
void SendCmd2Scalar(BYTE command)
{
	BYTE iTemp;
	for (iTemp=0 ; iTemp<8 ; iTemp++) 
	{
		UartSendData(ScalarCommand[command][iTemp]);
	}
	
}


void Clear_UART_Rx_Buffer(void)
{
	for(UART_RxIndex=0 ; UART_RxIndex<4 ; UART_RxIndex++)
	{
		UART_RxBuff[UART_RxIndex] = 0;
	}
}

void Clear_UART_Tx_Buffer(void)
{
	for(UART_TxIndex=0 ; UART_TxIndex<4 ; UART_TxIndex++)
	{
		UART_TxBuff[UART_TxIndex] = 0;
	}
}


void UART1_Data_Handler(void)
{
	_nop_();
}


void UART2_Data_Handler(void)
{
	_nop_();
}