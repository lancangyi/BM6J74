C51 COMPILER V7.50   OEM_GPIO                                                              09/17/2020 21:06:54 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE OEM_GPIO
OBJECT MODULE PLACED IN Oem\Oem_GPIO.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\c51.exe Oem\Oem_GPIO.c LA WL(1) CD OT(9,SIZE) NOAREGS OR INCDIR(.\Core\Include\;.\O
                    -em\Include\)

line level    source

   1          /*-----------------------------------------------------------------------------
   2           * TITLE: OEM_GPIO.C - Main Program for KBC firmware.
   3           *
   4           * Main processing loop (interrupt driven) for the keyboard controller/scanner.
   5           *
   6           * Copyright (c) 1983-2007, Insyde Software Corporation. All Rights Reserved.
   7           *
   8           * You may not reproduce, distribute, publish, display, perform, modify, adapt,
   9           * transmit, broadcast, present, recite, release, license or otherwise exploit
  10           * any part of this publication in any form, by any means, without the prior
  11           * written permission of Insyde Software Corporation.
  12           *---------------------------------------------------------------------------*/
  13          
  14          #include "Core_Inc.h"
  15          #include "Oem_Inc.h"
  16          
  17          
  18          /*
  19                  Here describes the basic configuration about the IT8731 GPIO
  20          */
  21          
  22          
  23          void PWR_LED_ON(void)
  24          {
  25   1              GP33_HI();
  26   1      
  27   1      }
  28          void PWR_LED_OFF(void)
  29          {
  30   1          GP33_LO();
  31   1      
  32   1      }
  33          
  34          
  35          void Initialize_GPIO_Pin_State(void)
  36          {       
  37   1              Index_07H = 0x07;
  38   1              Index_30H = 0x01;
  39   1              //Set GP7X output
  40   1              Index_CEH = 0xFF;
  41   1              GPIO_7x = 0x00;
  42   1      
  43   1              Index_07H= 0x00;
  44   1      
  45   1              SET_BIT(GP33_SEL_REG,3);                //Set GP33
  46   1              SET_BIT(GP3X_IOMODE_REG,3);             //Set GP33 output
  47   1              SET_BIT(GP3X_FUNC_REG,3);               //Set GP33 simple IO function
  48   1      
  49   1              
  50   1              //J74_001++>>
  51   1              Index_07H = 0x07;
  52   1              SET_BIT(GP36_SEL_REG,6);                //Set GP36
  53   1              SET_BIT(GP3X_FUNC_REG,6);               //Set GP36 simple IO function
  54   1              SET_BIT(GP3X_IOMODE_REG,6);     //Set GP36 output
C51 COMPILER V7.50   OEM_GPIO                                                              09/17/2020 21:06:54 PAGE 2   

  55   1              GP36_LO();
  56   1                      
  57   1              SET_BIT(GP14_SEL_REG,4);                //Set GP14
  58   1              SET_BIT(GP1X_IOMODE_REG,4);     //Set GP14 output
  59   1              SET_BIT(GP1X_FUNC_REG,4);               //Set GP14 simple IO function
  60   1              GP14_LO();
  61   1              
  62   1                      
  63   1              SET_BIT(GP37_SEL_REG,7);                //Set GP37
  64   1              SET_BIT(GP3X_IOMODE_REG,7);     //Set GP37 output
  65   1              SET_BIT(GP3X_FUNC_REG,7);               //Set GP37 simple IO function
  66   1              GP37_LO();
  67   1                      
  68   1              SET_BIT(GP24_SEL_REG,4);                //Set GP24
  69   1              SET_BIT(GP2X_IOMODE_REG,4);     //Set GP24 output
  70   1              SET_BIT(GP2X_FUNC_REG,4);               //Set GP24 simple IO function
  71   1              GP24_LO();
  72   1              Index_07H = 0x00;
  73   1      
  74   1              //Index_07H = 0x06;
  75   1              //Index_30H = 0x01;
  76   1              //Index_70H = 0x0C;
  77   1              //Index_07H = 0x00;             
  78   1              //J74_001++<< 
  79   1      }
  80          
  81          
  82          
C51 COMPILER V7.50   OEM_GPIO                                                              09/17/2020 21:06:54 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION PWR_LED_ON (BEGIN)
                                           ; SOURCE LINE # 23
                                           ; SOURCE LINE # 24
                                           ; SOURCE LINE # 25
0000 900000      E     MOV     DPTR,#GPIO_3x
0003 E0                MOVX    A,@DPTR
0004 4408              ORL     A,#08H
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 27
0007 22                RET     
             ; FUNCTION PWR_LED_ON (END)

             ; FUNCTION PWR_LED_OFF (BEGIN)
                                           ; SOURCE LINE # 28
                                           ; SOURCE LINE # 29
                                           ; SOURCE LINE # 30
0000 900000      E     MOV     DPTR,#GPIO_3x
0003 E0                MOVX    A,@DPTR
0004 54F7              ANL     A,#0F7H
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 32
0007 22                RET     
             ; FUNCTION PWR_LED_OFF (END)

             ; FUNCTION Initialize_GPIO_Pin_State (BEGIN)
                                           ; SOURCE LINE # 35
                                           ; SOURCE LINE # 36
                                           ; SOURCE LINE # 37
0000 900000      E     MOV     DPTR,#Index_07H
0003 7407              MOV     A,#07H
0005 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 38
0006 900000      E     MOV     DPTR,#Index_30H
0009 7401              MOV     A,#01H
000B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 40
000C 900000      E     MOV     DPTR,#Index_CEH
000F 74FF              MOV     A,#0FFH
0011 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 41
0012 E4                CLR     A
0013 900000      E     MOV     DPTR,#GPIO_7x
0016 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 43
0017 900000      E     MOV     DPTR,#Index_07H
001A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 45
001B 900000      E     MOV     DPTR,#Index_27H
001E E0                MOVX    A,@DPTR
001F 4408              ORL     A,#08H
0021 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 46
0022 900000      E     MOV     DPTR,#Index_CAH
0025 E0                MOVX    A,@DPTR
0026 4408              ORL     A,#08H
0028 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 47
0029 900000      E     MOV     DPTR,#Index_C2H
002C E0                MOVX    A,@DPTR
C51 COMPILER V7.50   OEM_GPIO                                                              09/17/2020 21:06:54 PAGE 4   

002D 4408              ORL     A,#08H
002F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 51
0030 900000      E     MOV     DPTR,#Index_07H
0033 7407              MOV     A,#07H
0035 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 52
0036 900000      E     MOV     DPTR,#Index_27H
0039 E0                MOVX    A,@DPTR
003A 4440              ORL     A,#040H
003C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 53
003D 900000      E     MOV     DPTR,#Index_C2H
0040 E0                MOVX    A,@DPTR
0041 4440              ORL     A,#040H
0043 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 54
0044 900000      E     MOV     DPTR,#Index_CAH
0047 E0                MOVX    A,@DPTR
0048 4440              ORL     A,#040H
004A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 55
004B 900000      E     MOV     DPTR,#GPIO_3x
004E E0                MOVX    A,@DPTR
004F 54BF              ANL     A,#0BFH
0051 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 57
0052 900000      E     MOV     DPTR,#Index_25H
0055 E0                MOVX    A,@DPTR
0056 4410              ORL     A,#010H
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 58
0059 900000      E     MOV     DPTR,#Index_C8H
005C E0                MOVX    A,@DPTR
005D 4410              ORL     A,#010H
005F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 59
0060 900000      E     MOV     DPTR,#Index_C0H
0063 E0                MOVX    A,@DPTR
0064 4410              ORL     A,#010H
0066 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 60
0067 900000      E     MOV     DPTR,#GPIO_1x
006A E0                MOVX    A,@DPTR
006B 54EF              ANL     A,#0EFH
006D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 63
006E 900000      E     MOV     DPTR,#Index_27H
0071 E0                MOVX    A,@DPTR
0072 4480              ORL     A,#080H
0074 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 64
0075 900000      E     MOV     DPTR,#Index_CAH
0078 E0                MOVX    A,@DPTR
0079 4480              ORL     A,#080H
007B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 65
007C 900000      E     MOV     DPTR,#Index_C2H
007F E0                MOVX    A,@DPTR
0080 4480              ORL     A,#080H
0082 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 66
C51 COMPILER V7.50   OEM_GPIO                                                              09/17/2020 21:06:54 PAGE 5   

0083 900000      E     MOV     DPTR,#GPIO_3x
0086 E0                MOVX    A,@DPTR
0087 547F              ANL     A,#07FH
0089 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 68
008A 900000      E     MOV     DPTR,#Index_26H
008D E0                MOVX    A,@DPTR
008E 4410              ORL     A,#010H
0090 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 69
0091 900000      E     MOV     DPTR,#Index_C9H
0094 E0                MOVX    A,@DPTR
0095 4410              ORL     A,#010H
0097 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 70
0098 900000      E     MOV     DPTR,#Index_C1H
009B E0                MOVX    A,@DPTR
009C 4410              ORL     A,#010H
009E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 71
009F 900000      E     MOV     DPTR,#GPIO_2x
00A2 E0                MOVX    A,@DPTR
00A3 54EF              ANL     A,#0EFH
00A5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 72
00A6 E4                CLR     A
00A7 900000      E     MOV     DPTR,#Index_07H
00AA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 79
00AB 22                RET     
             ; FUNCTION Initialize_GPIO_Pin_State (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    188    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
