C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE CORE_MODULE
OBJECT MODULE PLACED IN Core\Core_module.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\c51.exe Core\Core_module.c LA WL(1) CD OT(9,SIZE) NOAREGS OR INCDIR(.\Core\Include\
                    -;.\Oem\Include\)

line level    source

   1          /*-----------------------------------------------------------------------------
   2           * Filename: CORE_MODULE.C
   3           * Function: System Management SMBus Protocol drivers.
   4           *
   5           * Copyright (c) 2006-2009, ITE Tech. Inc. All Rights Reserved.
   6           *---------------------------------------------------------------------------*/
   7          #include "CORE_INC.H"
   8          #include "OEM_INC.H"
   9          
  10          
  11          
  12          
  13          
  14          
  15          
  16          //-----------------------------------------------------------------------------
  17          /*****************************************************************************/
  18          /* GPIO MODULE ***************************************************************/
  19          /*****************************************************************************/
  20          //-----------------------------------------------------------------------------
  21          // ----------------------------------------------------------------------------
  22          // Input Signal Debounce function
  23          // Input Parameter: PIN_STATUS,_ACTIVE,Counter_ID,ReloadCnt
  24          // Return:  ioStatus
  25          //      0x00: No Acitve
  26          //      0x01: Active
  27          //      0x02: Active and Debounced
  28          //      0x03: Repeat Active
  29          // ----------------------------------------------------------------------------
  30          struct inDebounce
  31          {   XBYTE   *REG;
  32              XBYTE   *Counter;
  33              BYTE    FLAG_0;
  34              BYTE    FLAG_1;
  35          };
  36          
  37          //-----------------------------------------------------------------------------
  38          
  39          const struct inDebounce code inDebounce_TBL[] =
  40              {
  41                  {&DEBOUNCE_FLAG1    ,&DEBOUNCE_CONT0    ,BIT0   ,BIT1   },
  42                  {&DEBOUNCE_FLAG1    ,&DEBOUNCE_CONT1    ,BIT2   ,BIT3   },
  43                  {&DEBOUNCE_FLAG1    ,&DEBOUNCE_CONT2    ,BIT4   ,BIT5   },
  44                  {&DEBOUNCE_FLAG1    ,&DEBOUNCE_CONT3    ,BIT6   ,BIT7   },
  45                  {&DEBOUNCE_FLAG2    ,&DEBOUNCE_CONT4    ,BIT0   ,BIT1   },
  46                  {&DEBOUNCE_FLAG2    ,&DEBOUNCE_CONT5    ,BIT2   ,BIT3   },
  47                  {&DEBOUNCE_FLAG2    ,&DEBOUNCE_CONT6    ,BIT4   ,BIT5   },
  48                  {&DEBOUNCE_FLAG2    ,&DEBOUNCE_CONT7    ,BIT6   ,BIT7   }
  49              };
  50          
  51          //-----------------------------------------------------------------------------
  52          // Return:  ioStatus
  53          //      0x00: No Acitve
  54          //      0x01: Active
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 2   

  55          //      0x02: Active and Debounced
  56          //      0x03: Repeat Active
  57          //-----------------------------------------------------------------------------
  58          
  59          BYTE InputDebounce(FLAG PIN_STATUS,FLAG _ACTIVE,BYTE Counter_ID,BYTE ReloadCnt)
  60          {
  61   1          BYTE    ioStatus = 0x00;
  62   1          XBYTE   *in_FlagREG;
  63   1          XBYTE   *in_Counter;
  64   1          BYTE    in_FLAG_0,in_FLAG_1;
  65   1          Counter_ID &= 0x07;
  66   1          in_FlagREG = inDebounce_TBL[Counter_ID].REG;
  67   1          in_Counter = inDebounce_TBL[Counter_ID].Counter;
  68   1          in_FLAG_0  = inDebounce_TBL[Counter_ID].FLAG_0;
  69   1          in_FLAG_1  = inDebounce_TBL[Counter_ID].FLAG_1;
  70   1          //Check Pin Status
  71   1          if( PIN_STATUS == _ACTIVE )
  72   1          {   if ( ( (*in_FlagREG) & (in_FLAG_1) ) == 0 )
  73   2              {
  74   3                  if ( ( (*in_FlagREG) & (in_FLAG_0) ) == 0 )
  75   3                  {   (*in_Counter) = ReloadCnt;
  76   4                      (*in_FlagREG) |= in_FLAG_0;
  77   4                      ioStatus = 0x01;
  78   4                  }
  79   3                  else
  80   3                  {   ioStatus = 0x01;
  81   4                      (*in_Counter)--;
  82   4      
  83   4                      if( (*in_Counter) == 0 )
  84   4                      {
  85   5                          (*in_FlagREG) |= in_FLAG_1;
  86   5                          (*in_FlagREG) &= (~in_FLAG_0);
  87   5                          ioStatus = 0x02;
  88   5                      }
  89   4                  }
  90   3              }
  91   2              else
  92   2              {
  93   3                  (*in_FlagREG) |= in_FLAG_0;
  94   3                  ioStatus = 0x03;
  95   3              }
  96   2      
  97   2          }
  98   1          else
  99   1          {
 100   2              (*in_Counter) = ReloadCnt;
 101   2              (*in_FlagREG) &= ( ~(in_FLAG_0+in_FLAG_1) );
 102   2              ioStatus = 0x00;
 103   2          }
 104   1          return  ioStatus;
 105   1      }
 106          
 107          
 108          void Oem_Check1XBtn0(void)
 109          {
 110   1              BYTE BTemp;
 111   1              BYTE DTemp;
 112   1      
 113   1          BTemp = InputDebounce(IS_BIT_SET(GPIO_1x, 0), LowActive, 0x01, T_PANEL_SIDE_ONDB) ;
 114   1      
 115   1          if ( BTemp == 0x02 )        // Active and Debounced
 116   1          {
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 3   

 117   2                      
 118   2          }
 119   1          else if ( BTemp == 0x03 )        // Active and Debounced
 120   1          {
 121   2              BtnOverTimer1++;
 122   2              if  ( ( BtnOverTimer1 > T_PANEL_BTN_DELAY) && (BtnOverTimer1%30 == 0x00) )
 123   2              {
 124   3                      
 125   3              }
 126   2         }  
 127   1          else
 128   1         {
 129   2              BtnOverTimer1= 0 ;
 130   2         }
 131   1      
 132   1      }
 133          
 134          
 135          void Oem_Check1XBtn1(void)
 136          {
 137   1          BYTE BTemp;
 138   1          BYTE DTemp;
 139   1      
 140   1      
 141   1          BTemp = InputDebounce(IS_BIT_SET(GPIO_1x, 1), LowActive, 0x02, T_PANEL_SIDE_ONDB) ;
 142   1      
 143   1      
 144   1          if ( BTemp == 0x02 )        // Active and Debounced
 145   1          {
 146   2      
 147   2      
 148   2          }
 149   1          else if ( BTemp == 0x03 )        // Active and Debounced
 150   1          {
 151   2              BtnOverTimer2++;
 152   2              if  ( ( BtnOverTimer2 > T_PANEL_BTN_DELAY) && (BtnOverTimer2%30 == 0x00) )
 153   2              {
 154   3      
 155   3              }
 156   2         }
 157   1         else
 158   1         {
 159   2              BtnOverTimer2= 0 ;
 160   2         }
 161   1      
 162   1              
 163   1      }
 164          
 165          
 166          
 167          
 168          
 169          
 170          //Init EC side PWM output
 171          //Freq = (CPRS+1) x 256 x Tclk
 172          void Init_EC_PWM (void)
 173          {
 174   1              CLR_BIT(PWMCTL, PCCE);          //Disable PWMOUT
 175   1              
 176   1              switch(PWM_Freq)
 177   1              {
 178   2      
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 4   

 179   2                      case PWM_Freq_64Hz:
 180   2                              CLR_BIT(PWMCTL, PCFS);          //Clock: 32.768kHz
 181   2                              CPRS = 1;
 182   2                              //              32.768k / ((1+1)*256) = 64 Hz
 183   2                      break;
 184   2      
 185   2      
 186   2                      case PWM_Freq_128Hz:
 187   2                              CLR_BIT(PWMCTL, PCFS);          //Clock: 32.768kHz
 188   2                              CPRS = 0;
 189   2                              //              32.768k / ((0+1)*256) = 128 Hz
 190   2                      break;
 191   2      
 192   2      
 193   2                      case PWM_Freq_200Hz:
 194   2                              SET_BIT(PWMCTL, PCFS);          //Clock: 9.2MHz
 195   2                              CPRS = 179;
 196   2                              //              9.2MHz / ((179+1)*256) = 199.6527Hz
 197   2                      break;
 198   2      
 199   2      
 200   2                      case PWM_Freq_250Hz:
 201   2                              SET_BIT(PWMCTL, PCFS);          //Clock: 9.2MHz
 202   2                              CPRS = 143;
 203   2                              //              9.2MHz / ((143+1)*256) = 249.5659Hz
 204   2                      break;
 205   2      
 206   2      
 207   2                      case PWM_Freq_500Hz:
 208   2                              SET_BIT(PWMCTL, PCFS);          //Clock: 9.2MHz
 209   2                              CPRS = 71;
 210   2                              //              9.2MHz / ((71+1)*256) = 499.1319444Hz
 211   2                      break;
 212   2      
 213   2      
 214   2                      case PWM_Freq_1kHz:
 215   2                              SET_BIT(PWMCTL, PCFS);          //Clock: 9.2MHz
 216   2                              CPRS = 35;
 217   2                              //              9.2MHz / ((35+1)*256) = 998.26388Hz             35937.5
 218   2                      break;
 219   2      
 220   2      
 221   2                      case PWM_Freq_2kHz:
 222   2                              SET_BIT(PWMCTL, PCFS);          //Clock: 9.2MHz
 223   2                              CPRS = 17;
 224   2                              //              9.2MHz / ((17+1)*256) = 1996.527777Hz           35937.5
 225   2                      break;
 226   2      
 227   2      
 228   2                      case PWM_Freq_35_9kHz:
 229   2                              SET_BIT(PWMCTL, PCFS);          //Clock: 9.2MHz
 230   2                              CPRS = 0;
 231   2                              //              9.2MHz / ((0+1)*256) = 35937.5Hz                
 232   2                      break;
 233   2      
 234   2      
 235   2                      case PWM_Freq_Other_Setting:
 236   2                              
 237   2                              //SET_BIT(PWMCTL, PCFS);                //Clock: 9.2MHz
 238   2                              //CLR_BIT(PWMCTL, PCFS);                //Clock: 32.768kHz
 239   2                              //CPRS = 0;
 240   2                              
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 5   

 241   2                      break;
 242   2      
 243   2      
 244   2                      default:
 245   2                      break;
 246   2                              
 247   2              }
 248   1      }
 249          
 250          
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 6   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com0026 (BEGIN)
0000         L?0039:
0000         L?0040:
0000 900000      E     MOV     DPTR,#PWMCTL
0003 E0                MOVX    A,@DPTR
0004 4410              ORL     A,#010H
0006 F0                MOVX    @DPTR,A
0007 900000      E     MOV     DPTR,#CPRS
000A 22                RET     
000B         L?0041:
000B 900000      R     MOV     DPTR,#ReloadCnt
000E E0                MOVX    A,@DPTR
000F FF                MOV     R7,A
0010 A3                INC     DPTR
0011 E0                MOVX    A,@DPTR
0012 FA                MOV     R2,A
0013 A3                INC     DPTR
0014 E0                MOVX    A,@DPTR
0015 F582              MOV     DPL,A
0017 8A83              MOV     DPH,R2
0019 EF                MOV     A,R7
001A F0                MOVX    @DPTR,A
001B 8D82              MOV     DPL,R5
001D 8C83              MOV     DPH,R4
001F 22                RET     
0020         L?0042:
0020 E0                MOVX    A,@DPTR
0021 FE                MOV     R6,A
0022 A3                INC     DPTR
0023 E0                MOVX    A,@DPTR
0024 FF                MOV     R7,A
0025 7C00              MOV     R4,#00H
0027 7D1E              MOV     R5,#01EH
0029 120000      E     LCALL   ?C?UIDIV
002C ED                MOV     A,R5
002D 4C                ORL     A,R4
002E 22                RET     
             ; FUNCTION Com0026 (END)

             ; FUNCTION _InputDebounce (BEGIN)
                                           ; SOURCE LINE # 59
0000 900000      R     MOV     DPTR,#PIN_STATUS
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 ED                MOV     A,R5
0007 F0                MOVX    @DPTR,A
;---- Variable 'Counter_ID' assigned to Register 'R6' ----
0008 CE                XCH     A,R6
0009 EB                MOV     A,R3
000A CE                XCH     A,R6
                                           ; SOURCE LINE # 60
                                           ; SOURCE LINE # 61
;---- Variable 'ioStatus' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 65
000B EB                MOV     A,R3
000C 5407              ANL     A,#07H
000E FE                MOV     R6,A
                                           ; SOURCE LINE # 66
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 7   

000F 75F006            MOV     B,#06H
0012 A4                MUL     AB
0013 2400        R     ADD     A,#LOW inDebounce_TBL
0015 F582              MOV     DPL,A
0017 E4                CLR     A
0018 3400        R     ADDC    A,#HIGH inDebounce_TBL
001A F583              MOV     DPH,A
001C E4                CLR     A
001D 93                MOVC    A,@A+DPTR
001E FC                MOV     R4,A
001F 7401              MOV     A,#01H
0021 93                MOVC    A,@A+DPTR
0022 FD                MOV     R5,A
;---- Variable 'in_FlagREG' assigned to Register 'R4/R5' ----
                                           ; SOURCE LINE # 67
0023 CB                XCH     A,R3
0024 EE                MOV     A,R6
0025 CB                XCH     A,R3
0026 EE                MOV     A,R6
0027 75F006            MOV     B,#06H
002A A4                MUL     AB
002B 2400        R     ADD     A,#LOW inDebounce_TBL+02H
002D F582              MOV     DPL,A
002F E4                CLR     A
0030 3400        R     ADDC    A,#HIGH inDebounce_TBL+02H
0032 F583              MOV     DPH,A
0034 E4                CLR     A
0035 93                MOVC    A,@A+DPTR
0036 FB                MOV     R3,A
0037 7401              MOV     A,#01H
0039 93                MOVC    A,@A+DPTR
003A 900000      R     MOV     DPTR,#in_Counter
003D CB                XCH     A,R3
003E F0                MOVX    @DPTR,A
003F A3                INC     DPTR
0040 EB                MOV     A,R3
0041 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 68
0042 EE                MOV     A,R6
0043 75F006            MOV     B,#06H
0046 A4                MUL     AB
0047 2400        R     ADD     A,#LOW inDebounce_TBL+04H
0049 F582              MOV     DPL,A
004B E4                CLR     A
004C 3400        R     ADDC    A,#HIGH inDebounce_TBL+04H
004E F583              MOV     DPH,A
0050 E4                CLR     A
0051 93                MOVC    A,@A+DPTR
;---- Variable 'in_FLAG_0' assigned to Register 'R1' ----
0052 F9                MOV     R1,A
                                           ; SOURCE LINE # 69
0053 EE                MOV     A,R6
0054 75F006            MOV     B,#06H
0057 A4                MUL     AB
0058 2400        R     ADD     A,#LOW inDebounce_TBL+05H
005A F582              MOV     DPL,A
005C E4                CLR     A
005D 3400        R     ADDC    A,#HIGH inDebounce_TBL+05H
005F F583              MOV     DPH,A
0061 E4                CLR     A
0062 93                MOVC    A,@A+DPTR
0063 900000      R     MOV     DPTR,#in_FLAG_1
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 8   

0066 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 71
0067 900000      R     MOV     DPTR,#_ACTIVE
006A E0                MOVX    A,@DPTR
006B FE                MOV     R6,A
006C 900000      R     MOV     DPTR,#PIN_STATUS
006F E0                MOVX    A,@DPTR
0070 6E                XRL     A,R6
0071 706A              JNZ     ?C0001
                                           ; SOURCE LINE # 72
0073 8D82              MOV     DPL,R5
0075 8C83              MOV     DPH,R4
0077 E0                MOVX    A,@DPTR
0078 FE                MOV     R6,A
0079 900000      R     MOV     DPTR,#in_FLAG_1
007C E0                MOVX    A,@DPTR
007D FB                MOV     R3,A
007E EE                MOV     A,R6
007F 5B                ANL     A,R3
0080 7050              JNZ     ?C0002
                                           ; SOURCE LINE # 73
                                           ; SOURCE LINE # 74
0082 8D82              MOV     DPL,R5
0084 8C83              MOV     DPH,R4
0086 E0                MOVX    A,@DPTR
0087 59                ANL     A,R1
0088 700A              JNZ     ?C0003
                                           ; SOURCE LINE # 75
                                           ; SOURCE LINE # 76
008A 120000      R     LCALL   L?0041
008D E0                MOVX    A,@DPTR
008E 49                ORL     A,R1
008F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 77
0090 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 78
0092 8062              SJMP    ?C0007
0094         ?C0003:
                                           ; SOURCE LINE # 80
0094 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 81
0096 900000      R     MOV     DPTR,#in_Counter
0099 E0                MOVX    A,@DPTR
009A FA                MOV     R2,A
009B A3                INC     DPTR
009C E0                MOVX    A,@DPTR
009D FB                MOV     R3,A
009E F582              MOV     DPL,A
00A0 8A83              MOV     DPH,R2
00A2 E0                MOVX    A,@DPTR
00A3 14                DEC     A
00A4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 83
00A5 8B82              MOV     DPL,R3
00A7 8A83              MOV     DPH,R2
00A9 E0                MOVX    A,@DPTR
00AA 704A              JNZ     ?C0007
                                           ; SOURCE LINE # 84
                                           ; SOURCE LINE # 85
00AC 8D82              MOV     DPL,R5
00AE 8C83              MOV     DPH,R4
00B0 C083              PUSH    DPH
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 9   

00B2 C082              PUSH    DPL
00B4 E0                MOVX    A,@DPTR
00B5 FF                MOV     R7,A
00B6 900000      R     MOV     DPTR,#in_FLAG_1
00B9 E0                MOVX    A,@DPTR
00BA FE                MOV     R6,A
00BB EF                MOV     A,R7
00BC 4E                ORL     A,R6
00BD D082              POP     DPL
00BF D083              POP     DPH
00C1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 86
00C2 8D82              MOV     DPL,R5
00C4 8C83              MOV     DPH,R4
00C6 E0                MOVX    A,@DPTR
00C7 FF                MOV     R7,A
00C8 E9                MOV     A,R1
00C9 F4                CPL     A
00CA FE                MOV     R6,A
00CB EF                MOV     A,R7
00CC 5E                ANL     A,R6
00CD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 87
00CE 7F02              MOV     R7,#02H
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 89
                                           ; SOURCE LINE # 90
00D0 8024              SJMP    ?C0007
00D2         ?C0002:
                                           ; SOURCE LINE # 92
                                           ; SOURCE LINE # 93
00D2 8D82              MOV     DPL,R5
00D4 8C83              MOV     DPH,R4
00D6 E0                MOVX    A,@DPTR
00D7 49                ORL     A,R1
00D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 94
00D9 7F03              MOV     R7,#03H
                                           ; SOURCE LINE # 95
                                           ; SOURCE LINE # 97
00DB 8019              SJMP    ?C0007
00DD         ?C0001:
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 101
00DD 120000      R     LCALL   L?0041
00E0 C083              PUSH    DPH
00E2 C082              PUSH    DPL
00E4 E0                MOVX    A,@DPTR
00E5 FF                MOV     R7,A
00E6 900000      R     MOV     DPTR,#in_FLAG_1
00E9 E0                MOVX    A,@DPTR
00EA 29                ADD     A,R1
00EB F4                CPL     A
00EC FE                MOV     R6,A
00ED EF                MOV     A,R7
00EE 5E                ANL     A,R6
00EF D082              POP     DPL
00F1 D083              POP     DPH
00F3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 102
00F4 E4                CLR     A
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 10  

00F5 FF                MOV     R7,A
                                           ; SOURCE LINE # 103
00F6         ?C0007:
                                           ; SOURCE LINE # 104
                                           ; SOURCE LINE # 105
00F6         ?C0008:
00F6 22                RET     
             ; FUNCTION _InputDebounce (END)

             ; FUNCTION Oem_Check1XBtn0 (BEGIN)
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 109
                                           ; SOURCE LINE # 113
0000 900000      E     MOV     DPTR,#GPIO_1x
0003 E0                MOVX    A,@DPTR
0004 30E004            JNB     ACC.0,?C0009
0007 7F01              MOV     R7,#01H
0009 8002              SJMP    ?C0010
000B         ?C0009:
000B 7F00              MOV     R7,#00H
000D         ?C0010:
000D 900000      R     MOV     DPTR,#?_InputDebounce?BYTE+03H
0010 740A              MOV     A,#0AH
0012 F0                MOVX    @DPTR,A
0013 7B01              MOV     R3,#01H
0015 E4                CLR     A
0016 FD                MOV     R5,A
0017 120000      R     LCALL   _InputDebounce
;---- Variable 'BTemp' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 115
001A EF                MOV     A,R7
001B 6402              XRL     A,#02H
001D 6028              JZ      ?C0016
                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 118
001F         ?C0011:
                                           ; SOURCE LINE # 119
001F EF                MOV     A,R7
0020 B4031D            CJNE    A,#03H,?C0013
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
0023 900000      E     MOV     DPTR,#BtnOverTimer1
0026 E4                CLR     A
0027 75F001            MOV     B,#01H
002A 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 122
002D D3                SETB    C
002E 900000      E     MOV     DPTR,#BtnOverTimer1+01H
0031 E0                MOVX    A,@DPTR
0032 9419              SUBB    A,#019H
0034 900000      E     MOV     DPTR,#BtnOverTimer1
0037 E0                MOVX    A,@DPTR
0038 9400              SUBB    A,#00H
003A 400B              JC      ?C0016
003C 120000      R     LCALL   L?0042
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 126
003F 22                RET     
0040         ?C0013:
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 129
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 11  

0040 E4                CLR     A
0041 900000      E     MOV     DPTR,#BtnOverTimer1
0044 F0                MOVX    @DPTR,A
0045 A3                INC     DPTR
0046 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 130
                                           ; SOURCE LINE # 132
0047         ?C0016:
0047 22                RET     
             ; FUNCTION Oem_Check1XBtn0 (END)

             ; FUNCTION Oem_Check1XBtn1 (BEGIN)
                                           ; SOURCE LINE # 135
                                           ; SOURCE LINE # 136
                                           ; SOURCE LINE # 141
0000 900000      E     MOV     DPTR,#GPIO_1x
0003 E0                MOVX    A,@DPTR
0004 30E104            JNB     ACC.1,?C0017
0007 7F01              MOV     R7,#01H
0009 8002              SJMP    ?C0018
000B         ?C0017:
000B 7F00              MOV     R7,#00H
000D         ?C0018:
000D 900000      R     MOV     DPTR,#?_InputDebounce?BYTE+03H
0010 740A              MOV     A,#0AH
0012 F0                MOVX    @DPTR,A
0013 7B02              MOV     R3,#02H
0015 E4                CLR     A
0016 FD                MOV     R5,A
0017 120000      R     LCALL   _InputDebounce
;---- Variable 'BTemp' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 144
001A EF                MOV     A,R7
001B 6402              XRL     A,#02H
001D 6028              JZ      ?C0024
                                           ; SOURCE LINE # 145
                                           ; SOURCE LINE # 148
001F         ?C0019:
                                           ; SOURCE LINE # 149
001F EF                MOV     A,R7
0020 B4031D            CJNE    A,#03H,?C0021
                                           ; SOURCE LINE # 150
                                           ; SOURCE LINE # 151
0023 900000      E     MOV     DPTR,#BtnOverTimer2
0026 E4                CLR     A
0027 75F001            MOV     B,#01H
002A 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 152
002D D3                SETB    C
002E 900000      E     MOV     DPTR,#BtnOverTimer2+01H
0031 E0                MOVX    A,@DPTR
0032 9419              SUBB    A,#019H
0034 900000      E     MOV     DPTR,#BtnOverTimer2
0037 E0                MOVX    A,@DPTR
0038 9400              SUBB    A,#00H
003A 400B              JC      ?C0024
003C 120000      R     LCALL   L?0042
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 155
                                           ; SOURCE LINE # 156
003F 22                RET     
0040         ?C0021:
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 12  

                                           ; SOURCE LINE # 158
                                           ; SOURCE LINE # 159
0040 E4                CLR     A
0041 900000      E     MOV     DPTR,#BtnOverTimer2
0044 F0                MOVX    @DPTR,A
0045 A3                INC     DPTR
0046 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 160
                                           ; SOURCE LINE # 163
0047         ?C0024:
0047 22                RET     
             ; FUNCTION Oem_Check1XBtn1 (END)

             ; FUNCTION Init_EC_PWM (BEGIN)
                                           ; SOURCE LINE # 172
                                           ; SOURCE LINE # 173
                                           ; SOURCE LINE # 174
0000 900000      E     MOV     DPTR,#PWMCTL
0003 E0                MOVX    A,@DPTR
0004 54F7              ANL     A,#0F7H
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 176
0007 7F01              MOV     R7,#01H
0009 E4                CLR     A
000A 7065              JNZ     ?C0036
000C EF                MOV     A,R7
000D 120000      E     LCALL   ?C?CCASE
0010 0000        R     DW      ?C0026
0012 00                DB      00H
0013 0000        R     DW      ?C0027
0015 01                DB      01H
0016 0000        R     DW      ?C0028
0018 02                DB      02H
0019 0000        R     DW      ?C0029
001B 03                DB      03H
001C 0000        R     DW      ?C0030
001E 04                DB      04H
001F 0000        R     DW      ?C0031
0021 05                DB      05H
0022 0000        R     DW      ?C0032
0024 06                DB      06H
0025 0000        R     DW      ?C0033
0027 07                DB      07H
0028 0000              DW      00H
002A 0000        R     DW      ?C0036
                                           ; SOURCE LINE # 177
                                           ; SOURCE LINE # 179
002C         ?C0026:
                                           ; SOURCE LINE # 180
002C 900000      E     MOV     DPTR,#PWMCTL
002F E0                MOVX    A,@DPTR
0030 54EF              ANL     A,#0EFH
0032 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 181
0033 900000      E     MOV     DPTR,#CPRS
0036 7401              MOV     A,#01H
0038 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 183
0039 22                RET     
                                           ; SOURCE LINE # 186
003A         ?C0027:
                                           ; SOURCE LINE # 187
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 13  

003A 900000      E     MOV     DPTR,#PWMCTL
003D E0                MOVX    A,@DPTR
003E 54EF              ANL     A,#0EFH
                                           ; SOURCE LINE # 188
                                           ; SOURCE LINE # 190
0040 8029              SJMP    ?C0037
                                           ; SOURCE LINE # 193
0042         ?C0028:
                                           ; SOURCE LINE # 194
                                           ; SOURCE LINE # 195
0042 120000      R     LCALL   L?0039
0045 74B3              MOV     A,#0B3H
0047 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 197
0048 22                RET     
                                           ; SOURCE LINE # 200
0049         ?C0029:
                                           ; SOURCE LINE # 201
                                           ; SOURCE LINE # 202
0049 120000      R     LCALL   L?0039
004C 748F              MOV     A,#08FH
004E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 204
004F 22                RET     
                                           ; SOURCE LINE # 207
0050         ?C0030:
                                           ; SOURCE LINE # 208
                                           ; SOURCE LINE # 209
0050 120000      R     LCALL   L?0040
0053 7447              MOV     A,#047H
0055 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 211
0056 22                RET     
                                           ; SOURCE LINE # 214
0057         ?C0031:
                                           ; SOURCE LINE # 215
                                           ; SOURCE LINE # 216
0057 120000      R     LCALL   L?0040
005A 7423              MOV     A,#023H
005C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 218
005D 22                RET     
                                           ; SOURCE LINE # 221
005E         ?C0032:
                                           ; SOURCE LINE # 222
                                           ; SOURCE LINE # 223
005E 120000      R     LCALL   L?0040
0061 7411              MOV     A,#011H
0063 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 225
0064 22                RET     
                                           ; SOURCE LINE # 228
0065         ?C0033:
                                           ; SOURCE LINE # 229
0065 900000      E     MOV     DPTR,#PWMCTL
0068 E0                MOVX    A,@DPTR
0069 4410              ORL     A,#010H
006B         ?C0037:
006B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 230
006C E4                CLR     A
006D 900000      E     MOV     DPTR,#CPRS
C51 COMPILER V7.50   CORE_MODULE                                                           09/17/2020 21:06:52 PAGE 14  

0070 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 235
                                           ; SOURCE LINE # 241
                                           ; SOURCE LINE # 244
                                           ; SOURCE LINE # 245
                                           ; SOURCE LINE # 247
                                           ; SOURCE LINE # 248
0071         ?C0036:
0071 22                RET     
             ; FUNCTION Init_EC_PWM (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    552    ----
   CONSTANT SIZE    =     48    ----
   XDATA SIZE       =   ----       9
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
